# === Server Test Configuration ===

# === Paths ===
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
CONFIG_DIR="${SCRIPT_DIR}/config"
SCRIPTS_DIR="${SCRIPT_DIR}/scripts"
TESTS_DIR="${SCRIPT_DIR}/tests"
LOGS_DIR="${SCRIPT_DIR}/logs"

# === Test Parameters ===
FIO_RUNTIME=60
FIO_LOOPS=2
MAX_PARALLEL_JOBS=8

# === Block Sizes ===
declare -A BLOCK_SIZES=(
    ["sequential"]="128k"
    ["random"]="4k"
)

# === IO Depths ===
declare -A IO_DEPTHS=(
    ["sequential"]="1 2 4 8 16 32"
    ["random"]="1 2 4 8 16 32"
)

# === Number of Jobs ===
declare -A NUM_JOBS=(
    ["sequential"]="1 2 4 8 16 32"
    ["random"]="1 2 4 8 16 32"
)

# === Preconditioning Parameters ===
declare -A PRECONDITION=(
    ["sequential_block_size"]="128k"
    ["sequential_io_depth"]="128"
    ["sequential_num_jobs"]="1"
    ["sequential_loops"]="2"
    ["random_block_size"]="4k"
    ["random_io_depth"]="128"
    ["random_num_jobs"]="1"
    ["random_loops"]="2"
)

# === Monitoring Parameters ===
MONITOR_INTERVAL=10
TEMP_THRESHOLD=70
CPU_THRESHOLD=90
MEM_THRESHOLD=90

# === CSV Headers ===
CPU_HEADER="Timestamp,CPU_Usage_Percent,Load_Average_1min,Load_Average_5min,Load_Average_15min"
TEMP_HEADER="Timestamp,Drive,Model,Temperature_Celsius"
MEM_HEADER="Timestamp,Total_Memory_MB,Used_Memory_MB,Free_Memory_MB,Shared_Memory_MB,Buffer_Cache_MB,Available_Memory_MB"
FAN_HEADER="Timestamp,FAN1_RPM,FAN2_RPM,FAN3_RPM,FAN4_RPM,FANA_RPM"

# === Test Types ===
declare -A TEST_TYPES=(
    ["single_hdd"]="Single HDD Test"
    ["multiple_hdd"]="Multiple HDD Test"
    ["single_nvme"]="Single NVMe Test"
    ["multiple_nvme"]="Multiple NVMe Test"
    ["combined"]="Combined HDD+NVMe Test"
)

# === Color Definitions ===
NC='\033[0m'
RED='\033[0;31m'
GRN='\033[0;32m'
YEL='\033[1;33m'
BLU='\033[0;34m'
MAG='\033[0;35m'
CYN='\033[0;36m'

# === Logging ===
LOG_FILE="${LOGS_DIR}/servertest.log"
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR

# === Notification Settings ===
ENABLE_NOTIFICATIONS=false
NOTIFICATION_EMAIL=""
NOTIFICATION_SLACK_WEBHOOK=""

# === Disk State File ===
DISK_STATE_FILE="${SCRIPT_DIR}/.disk_state" 